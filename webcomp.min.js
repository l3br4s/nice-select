customElements.define("nice-select",class extends HTMLElement{connectedCallback(){const t=new CSSStyleSheet;let e=new CSSStyleSheet;const n=()=>{e.replace(`\n\t\t\t\t\tnice-search:empty:before {\n\t\t\t\t\t\tcontent: '${this.dataset.searchPlaceholder||""}';\n\t\t\t\t\t}\n\t\t\t\t`)};n();const i=this.attachShadow({mode:"open"});i.adoptedStyleSheets=[t,e];let o,d,a,r=[],s=[],c=[],p=this.getAttribute("placeholder");const l=document.createElement("nice-presentation");l.textContent=p||"Select";let h=this.querySelector("[selected]")?.getAttribute("value")||"";const b=document.createElement("nice-dropdown"),m=document.createElement("nice-optionlist");m.addEventListener("click",(t=>{"OPTION"===t.target?.tagName&&(o=t.target,g(),d?.focus())})),i.append(l),i.append(b);const u=()=>{s=c.filter((t=>!t.hasAttribute("disabled")))},g=()=>{if(o&&!o?.hasAttribute("disabled")){for(let t of r)t.removeAttribute("selected");h=o.value,o.setAttribute("selected",""),o?.textContent?l.textContent=o?.textContent:l.innerHTML="&nbsp;"}},f=()=>{if(this.hasAttribute("data-search")){this.removeAttribute("tabindex");const t=document.createElement("nice-search_wrapper");a=document.createElement("nice-search"),a.contentEditable="true",b.insertBefore(t,b.firstChild),t.appendChild(a),a.addEventListener("input",(t=>{c=r.filter((e=>e.textContent?.toLowerCase().includes(t.target?.textContent?.toLowerCase()??""))),u();for(let t of r)t.hidden=!c.includes(t)})),d=a}else{this.tabIndex=0,i.querySelector("nice-search_wrapper")?.remove();for(let t of r)t.removeAttribute("hidden");d=l}};f(),b.append(m);const v=(t,e=m)=>{if("OPTGROUP"===t?.nodeName){const e=t.cloneNode();m.append(e);for(const n of t.children)v(n,e)}if("OPTION"!==t?.nodeName)return;const n=t.cloneNode(!0);t.hasAttribute("selected")&&(console.log(t),t.hasAttribute("disabled")?n.removeAttribute("selected"):(o=n,g())),t.hasAttribute("hidden")||(c.push(n),t.hasAttribute("disabled")||s.push(n)),e.append(n),r.push(n)},w=t=>{t&&"OPTION"!==t.nodeName&&t.remove()},x=()=>{this.style.setProperty("--nice-min-width",Math.max(m.offsetWidth,l.offsetWidth)+"px")};requestAnimationFrame(x);for(let t of this.childNodes)v(t),requestAnimationFrame((()=>{w(t)}));this.childListObserver=new MutationObserver((t=>{for(const e of t)for(const t of e.addedNodes)v(t),w(t);this.style.setProperty("--nice-min-width","0"),requestAnimationFrame(x)})),this.attributesObserver=new MutationObserver((t=>{for(const e of t)switch(console.log(e),e.attributeName){case"data-search":f();break;case"data-search-placeholder":n();break;case"placeholder":p=e.target.attributes.placeholder.value,l.textContent=h||p}})),this.childListObserver.observe(this,{childList:!0}),this.attributesObserver.observe(this,{attributes:!0,attributeFilter:["data-search","data-search-placeholder","placeholder"]}),this.addEventListener("keydown",(t=>{if("ArrowDown"===t.key||"ArrowUp"===t.key){let e;if(t.preventDefault(),u(),"ArrowDown"===t.key?e=s[s.indexOf(o)+1]??s[0]:"ArrowUp"===t.key&&(e=s[s.indexOf(o)-1]??s[s.length-1]),!e)return;o=e,g()}})),t.replace("\n\t\t\t\t:host, *, *::before, *::after {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t}\n\t\t\t\t:host {\n\t\t\t\t\t--nice-padding-top: .375em;\n\t\t\t\t\t--nice-padding-bottom: .375em;\n\t\t\t\t\t--nice-padding-start: .625em;\n\t\t\t\t\t--nice-padding-end: .625em;\n\t\t\t\t\t--nice-option-padding-top: .25em;\n\t\t\t\t\t--nice-option-padding-bottom: .25em;\n\t\t\t\t\t--nice-option-padding-start: .25em;\n\t\t\t\t\t--nice-option-padding-end: .5em;\n\t\t\t\t\t--nice-optgroup-label-size: .85;\n\t\t\t\t\t--nice-min-width: 8em;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tz-index: 1;\n\t\t\t\t\tpadding-top: var(--nice-padding-top);\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t\tmin-width: max(var(--nice-min-width), 8em);\n\t\t\t\t}\n\t\t\t\tnice-dropdown {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tgap: .25em;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tpadding-top: calc(1lh + var(--nice-padding-top) + var(--nice-padding-bottom));\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tborder: 1px solid;\n\t\t\t\t\tborder-radius: .25em;\n\t\t\t\t\tz-index: -1;\n\t\t\t\t}\n\t\t\t\tnice-optionlist {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\toverflow-y: scroll;\n\t\t\t\t\tscrollbar-width: thin;\n\t\t\t\t\tpadding-inline-end: .3em;\n\t\t\t\t}\n\t\t\t\toption {\n\t\t\t\t\tbox-sizing: content-box;\n\t\t\t\t\theight: 1lh;\n\t\t\t\t\tpadding-block: var(--nice-option-padding-top) var(--nice-option-padding-bottom);\n\t\t\t\t\tpadding-inline: var(--nice-option-padding-start) var(--nice-option-padding-end);\n\t\t\t\t\ttransition: 130ms;\n\t\t\t\t}\n\t\t\t\toption:not([disabled]) {\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\toption:not([disabled], [selected]):focus,\n\t\t\t\toption:not([disabled], [selected]):hover {\n\t\t\t\t\tbackground: #f0f0f0;\n\t\t\t\t}\n\t\t\t\toption[selected] {\n\t\t\t\t\tbackground: #444;\n\t\t\t\t\tcolor: white;\n\t\t\t\t}\n\t\t\t\toption[disabled] {\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t\topacity: .5;\n\t\t\t\t}\n\t\t\t\toptgroup:not(:first-child) {\n\t\t\t\t\tpadding-top: calc(var(--nice-option-padding-top) * 2);\n\t\t\t\t\tborder-top: 1px dotted;\n\t\t\t\t}\n\t\t\t\toptgroup:not(:last-child) {\n\t\t\t\t\tmargin-bottom: var(--nice-option-padding-bottom);\n\t\t\t\t\tborder-bottom: 1px dotted;\n\t\t\t\t}\n\t\t\t\toptgroup {\n\t\t\t\t\tfont-size: .9em;\n\t\t\t\t\tpadding-inline-start: calc(var(--nice-option-padding-start) / 2 / .9);\n\t\t\t\t}\n\t\t\t\toptgroup [label] {\n\t\t\t\t\tfont-size: calc(1em * .85);\n\t\t\t\t}\n\t\t\t\toptgroup option {\n\t\t\t\t\tfont-size: calc(1em / .9);\n\t\t\t\t\tmargin-inline-start: 1em;\n\t\t\t\t}\n\t\t\t\tnice-search_wrapper {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: calc(1lh + .5em);\n\t\t\t\t\tpadding: .25em .5em;\n\t\t\t\t\tborder: 1px dotted;\n\t\t\t\t\tborder-radius: .25em;\n\t\t\t\t}\n\t\t\t\tnice-search_wrapper:focus-within {\n\t\t\t\t\toutline: 1px solid\n\t\t\t\t}\n\t\t\t\tnice-search {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tcursor: text;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow-y: clip;\n\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t}\n\t\t\t\tnice-search:focus {\n\t\t\t\t\toutline: none;\n\t\t\t\t}\n\t\t\t\tnice-search br {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\tnice-search:empty:before {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\topacity: .5;\n\t\t\t\t}\n\t\t\t\tnice-presentation {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t")}});