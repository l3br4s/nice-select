customElements.define("nice-select",class extends HTMLElement{static formAssociated=!0;static observedAttributes=["data-search","data-search-placeholder","placeholder"];constructor(){super(),this.internals=this.attachInternals(),this.dropdownElement=document.createElement("nice-dropdown"),this.optionListElement=document.createElement("nice-optionlist"),this.focusElement,this.searchInputElement,this.placeholder=this.getAttribute("placeholder"),this.presentationElement=document.createElement("nice-presentation"),this.presentationElement.textContent=this.placeholder||"Select",this.selectOptions=[],this.availableOptions=[],this.visibleOptions=[],this.shadow=this.attachShadow({mode:"open"}),this.toggleSearch=()=>{if(this.hasAttribute("data-search")){this.removeAttribute("tabindex");const t=document.createElement("nice-search_wrapper");this.searchInputElement=document.createElement("nice-search"),this.searchInputElement.contentEditable="true",this.dropdownElement?.insertBefore(t,this.dropdownElement.firstChild),t.appendChild(this.searchInputElement),this.searchInputElement.addEventListener("input",(t=>{this.visibleOptions=this.selectOptions.filter((e=>e.textContent?.toLowerCase().includes(t.target?.textContent?.toLowerCase()??""))),this.updateAvailableOptions();for(let t of this.selectOptions)t.hidden=!this.visibleOptions.includes(t)})),this.focusElement=this.searchInputElement}else{this.tabIndex=0,this.shadow.querySelector("nice-search_wrapper")?.remove();for(let t of this.selectOptions)t.removeAttribute("hidden");this.focusElement=this.presentationElement}},this.updateAvailableOptions=()=>{this.availableOptions=this.visibleOptions.filter((t=>!t.hasAttribute("disabled")))},this.selectCurrrentOption=()=>{if(this.currentOption&&!this.currentOption?.hasAttribute("disabled")){for(let t of this.selectOptions)t.removeAttribute("selected");this.submitValue=this.currentOption.value,this.internals.setFormValue(this.submitValue||null),this.currentOption.setAttribute("selected",""),this.currentOption?.textContent?this.presentationElement.textContent=this.currentOption?.textContent:this.presentationElement.innerHTML="&nbsp;"}},this.updateSearchPlaceHolderCSS=t=>{this.searchPlaceHolderCSS?.replace(`\n\t\t\t\t\tnice-search:empty:before {\n\t\t\t\t\t\tcontent: '${t||""}';\n\t\t\t\t\t}\n\t\t\t\t`)}}connectedCallback(){const t=new CSSStyleSheet;this.searchPlaceHolderCSS=new CSSStyleSheet,this.updateSearchPlaceHolderCSS(this.dataset.searchPlaceholder),this.shadow.adoptedStyleSheets=[t,this.searchPlaceHolderCSS],this.internals.setFormValue("banana"),this.internals.setFormValue(this.submitValue),this.optionListElement.addEventListener("click",(t=>{"OPTION"===t.target?.tagName&&(this.currentOption=t.target,this.selectCurrrentOption(),this.focusElement?.focus())})),this.shadow.append(this.presentationElement),this.shadow.append(this.dropdownElement),this.dropdownElement.append(this.optionListElement);const e=(t,n=this.optionListElement)=>{if("OPTGROUP"===t?.nodeName){const n=t.cloneNode();this.optionListElement?.append(n);for(const i of t.children)e(i,n)}if("OPTION"!==t?.nodeName)return;const i=t.cloneNode(!0);t.hasAttribute("selected")&&(t.hasAttribute("disabled")?i.removeAttribute("selected"):(this.currentOption=i,this.selectCurrrentOption())),t.hasAttribute("hidden")||(this.visibleOptions.push(i),t.hasAttribute("disabled")||this.availableOptions.push(i)),n?.append(i),this.selectOptions.push(i)},n=t=>{t&&"OPTION"!==t.nodeName&&t.remove()},i=()=>{this.style.setProperty("--nice-min-width",Math.max(this.optionListElement?.offsetWidth??0,this.presentationElement?.offsetWidth??0)+"px")};requestAnimationFrame(i);for(let t of this.childNodes)e(t),requestAnimationFrame((()=>{n(t)}));this.childListObserver=new MutationObserver((t=>{for(const i of t)for(const t of i.addedNodes)e(t),n(t);this.style.setProperty("--nice-min-width","0"),requestAnimationFrame(i)})),this.childListObserver.observe(this,{childList:!0}),this.addEventListener("keydown",(t=>{if("ArrowDown"===t.key||"ArrowUp"===t.key){let e;if(t.preventDefault(),this.updateAvailableOptions(),"ArrowDown"===t.key?e=this.availableOptions[this.availableOptions.indexOf(this.currentOption)+1]??this.availableOptions[0]:"ArrowUp"===t.key&&(e=this.availableOptions[this.availableOptions.indexOf(this.currentOption)-1]??this.availableOptions[this.availableOptions.length-1]),!e)return;this.currentOption=e,this.selectCurrrentOption()}})),t.replace("\n\t\t\t\t:host, *, *::before, *::after {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t}\n\t\t\t\t:host {\n\t\t\t\t\t--nice-padding-top: .375em;\n\t\t\t\t\t--nice-padding-bottom: .375em;\n\t\t\t\t\t--nice-padding-start: .625em;\n\t\t\t\t\t--nice-padding-end: .625em;\n\t\t\t\t\t--nice-option-padding-top: .25em;\n\t\t\t\t\t--nice-option-padding-bottom: .25em;\n\t\t\t\t\t--nice-option-padding-start: .25em;\n\t\t\t\t\t--nice-option-padding-end: .5em;\n\t\t\t\t\t--nice-optgroup-label-size: .85;\n\t\t\t\t\t--nice-min-width: 8em;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tz-index: 1;\n\t\t\t\t\tpadding-top: var(--nice-padding-top);\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t\tmin-width: max(var(--nice-min-width), 8em);\n\t\t\t\t}\n\t\t\t\tnice-dropdown {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tgap: .25em;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tpadding-top: calc(1lh + var(--nice-padding-top) + var(--nice-padding-bottom));\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tborder: 1px solid;\n\t\t\t\t\tborder-radius: .25em;\n\t\t\t\t\tz-index: -1;\n\t\t\t\t}\n\t\t\t\tnice-optionlist {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\toverflow-y: scroll;\n\t\t\t\t\tscrollbar-width: thin;\n\t\t\t\t\tpadding-inline-end: .3em;\n\t\t\t\t}\n\t\t\t\toption {\n\t\t\t\t\tbox-sizing: content-box;\n\t\t\t\t\theight: 1lh;\n\t\t\t\t\tpadding-block: var(--nice-option-padding-top) var(--nice-option-padding-bottom);\n\t\t\t\t\tpadding-inline: var(--nice-option-padding-start) var(--nice-option-padding-end);\n\t\t\t\t\ttransition: 130ms;\n\t\t\t\t}\n\t\t\t\toption:not([disabled]) {\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\toption:not([disabled], [selected]):focus,\n\t\t\t\toption:not([disabled], [selected]):hover {\n\t\t\t\t\tbackground: #f0f0f0;\n\t\t\t\t}\n\t\t\t\toption[selected] {\n\t\t\t\t\tbackground: #444;\n\t\t\t\t\tcolor: white;\n\t\t\t\t}\n\t\t\t\toption[disabled] {\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t\topacity: .5;\n\t\t\t\t}\n\t\t\t\toptgroup:not(:first-child) {\n\t\t\t\t\tpadding-top: calc(var(--nice-option-padding-top) * 2);\n\t\t\t\t\tborder-top: 1px dotted;\n\t\t\t\t}\n\t\t\t\toptgroup:not(:last-child) {\n\t\t\t\t\tmargin-bottom: var(--nice-option-padding-bottom);\n\t\t\t\t\tborder-bottom: 1px dotted;\n\t\t\t\t}\n\t\t\t\toptgroup {\n\t\t\t\t\tfont-size: .9em;\n\t\t\t\t\tpadding-inline-start: calc(var(--nice-option-padding-start) / 2 / .9);\n\t\t\t\t}\n\t\t\t\toptgroup [label] {\n\t\t\t\t\tfont-size: calc(1em * .85);\n\t\t\t\t}\n\t\t\t\toptgroup option {\n\t\t\t\t\tfont-size: calc(1em / .9);\n\t\t\t\t\tmargin-inline-start: 1em;\n\t\t\t\t}\n\t\t\t\tnice-search_wrapper {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: calc(1lh + .5em);\n\t\t\t\t\tpadding: .25em .5em;\n\t\t\t\t\tborder: 1px dotted;\n\t\t\t\t\tborder-radius: .25em;\n\t\t\t\t}\n\t\t\t\tnice-search_wrapper:focus-within {\n\t\t\t\t\toutline: 1px solid\n\t\t\t\t}\n\t\t\t\tnice-search {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tcursor: text;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow-y: clip;\n\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t}\n\t\t\t\tnice-search:focus {\n\t\t\t\t\toutline: none;\n\t\t\t\t}\n\t\t\t\tnice-search br {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\tnice-search:empty:before {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\topacity: .5;\n\t\t\t\t}\n\t\t\t\tnice-presentation {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t")}attributeChangedCallback(t,e,n){switch(t){case"data-search":this.toggleSearch();break;case"data-search-placeholder":this.updateSearchPlaceHolderCSS(n);break;case"placeholder":this.placeholder=n,this.presentationElement.textContent=this.submitValue||this.placeholder}}get open(){return this.internals.states.has("open")}set open(t){t?this.internals.states.add("open"):this.internals.states.delete("open")}get value(){return this.currentOption?.value||null}set value(t){const e=this.availableOptions.find((e=>e.value===t));if(!e)throw new Error(`'${t}' is not a valid option.`);this.currentOption=e,this.selectCurrrentOption()}});