customElements.define("nice-select",class extends HTMLElement{static formAssociated=!0;static observedAttributes=["data-search","data-search-placeholder","placeholder","disabled"];constructor(){super(),this.internals=this.attachInternals(),this.dropdownElement=document.createElement("nice-dropdown"),this.dropdownElement.setAttribute("part","dropdown"),this.dropdownInner=document.createElement("nice-dropdown-inner"),this.dropdownInner.setAttribute("part","dropdown-inner"),this.dropdownPadding=document.createElement("nice-dropdown-padding"),this.dropdownPadding.setAttribute("part","dropdown-padding"),this.dropdownElement.append(this.dropdownInner),this.dropdownInner.append(this.dropdownPadding),this.optionListElement=document.createElement("nice-optionlist"),this.optionListElement.setAttribute("part","optionlist"),this.placeholder=this.getAttribute("placeholder"),this.presentationElement=document.createElement("nice-presentation"),this.presentationElement.setAttribute("part","presentation"),this.presentationElement.textContent=this.placeholder||"Select",this.allOptions=[],this.availableOptions=[],this.visibleOptions=[],this.shadow=this.attachShadow({mode:"open"}),this.change=new Event("change"),this.toggleSearch=()=>{if(!this.searchEnabled||!this.hasAttribute("data-search"))if(this.searchEnabled=this.hasAttribute("data-search"),this.searchEnabled){const t=document.createElement("nice-search-wrapper");t.setAttribute("part","search-wrapper"),this.searchInputElement=document.createElement("nice-search"),this.searchInputElement.setAttribute("part","search"),this.searchInputElement.contentEditable="true",this.dropdownPadding?.insertBefore(t,this.dropdownPadding.firstChild),t.appendChild(this.searchInputElement),this.searchInputElement.addEventListener("input",(t=>{this.visibleOptions=this.allOptions.filter((e=>e.textContent?.toLowerCase().includes(t.target?.textContent?.toLowerCase()??""))),this.updateAvailableOptions();for(let t of this.allOptions)t.hidden=!this.visibleOptions.includes(t);for(let t of this.optionListElement.querySelectorAll("nice-optgroup"))t.hidden=!t.querySelector("option:not([hidden])")})),this.focusElement=this.searchInputElement,this.onfocus=()=>{this.searchInputElement.focus()}}else{this.shadow.querySelector("nice-search-wrapper")?.remove();for(let t of this.allOptions)t.removeAttribute("hidden");this.focusElement=this.presentationElement}},this.updateAvailableOptions=()=>{this.availableOptions=this.visibleOptions.filter((t=>!t.hasAttribute("disabled")))},this.selectCurrrentOption=()=>{if(!this.currentOption||this.currentOption?.hasAttribute("disabled"))return;this.skipObservers=!0;for(let t of this.allOptions)t.removeAttribute("selected");this.internals.setFormValue(this.currentOption.value||null),this.currentOption.value?(this.internals.states.add("valid"),this.internals.setValidity({valueMissing:!1})):(this.internals.states.delete("valid"),this.internals.setValidity({valueMissing:!0},"value is empty")),this.currentOption.setAttribute("selected","");const t=[...this.querySelectorAll("option")].filter((t=>t.value===this.currentOption.value||t.textContent===this.currentOption.textContent))[0];if(t){for(let t of this.querySelectorAll("option"))t.removeAttribute("selected");t.setAttribute("selected","")}this.currentOption?.textContent?this.presentationElement.textContent=this.currentOption?.textContent:this.presentationElement.innerHTML="&nbsp;",this.dispatchEvent(this.change),requestAnimationFrame((()=>{this.skipObservers=!1}))},this.updateSearchPlaceHolderCSS=t=>{this.searchPlaceHolderCSS?.replace(`\n\t\t\t\t\tnice-search:empty:before {\n\t\t\t\t\t\tcontent: '${t||""}';\n\t\t\t\t\t}\n\t\t\t\t`)},this.toggleDisabled=()=>{this.hasAttribute("disabled")?(this.presentationElement.setAttribute("inert",""),this.dropdownElement?.setAttribute("inert","")):(this.presentationElement.removeAttribute("inert"),this.dropdownElement?.removeAttribute("inert"))},this.openListener=t=>{this.contains(t.target)?this.internals.states.add("open"):this.internals.states.delete("open")}}connectedCallback(){const t=new CSSStyleSheet;this.searchPlaceHolderCSS=new CSSStyleSheet,this.updateSearchPlaceHolderCSS(this.dataset.searchPlaceholder),this.shadow.adoptedStyleSheets=[t,this.searchPlaceHolderCSS],this.internals.setValidity({valueMissing:!0},"value is empty"),this.tabIndex=0,this.shadow.append(this.presentationElement),this.shadow.append(this.dropdownElement),this.dropdownPadding.append(this.optionListElement);const e=(t,n=this.optionListElement)=>{if("OPTGROUP"===t?.nodeName){const n=document.createElement("nice-optgroup"),i=document.createElement("nice-optgroup-label");i.setAttribute("part","optgroup-label"),i.textContent=t.getAttribute("label"),n.appendChild(i),n.setAttribute("part","optgroup"),this.optionListElement?.append(n);for(const i of t.children)e(i,n)}if("OPTION"!==t?.nodeName)return;if(!t?.textContent.trim())return;const i=t.cloneNode(!0);i.setAttribute("part","option"),i.hasAttribute("selected")&&(i.hasAttribute("disabled")?i.removeAttribute("selected"):(this.currentOption=i,this.selectCurrrentOption())),i.hasAttribute("hidden")||(this.visibleOptions.push(i),i.hasAttribute("disabled")||this.availableOptions.push(i)),i.value||(i.value=i.textContent),n?.append(i),this.allOptions.push(i)},n=t=>{t&&"OPTION"!==t.nodeName&&"OPTGROUP"!==t.nodeName&&t.remove()},i=()=>{this.allOptions=[],this.availableOptions=[],this.visibleOptions=[],this.optionListElement.innerHTML="";for(const t of this.childNodes)e(t),requestAnimationFrame((()=>{n(t)}))};let o;i();const s=()=>{this.skipObservers=!0,this.style.setProperty("--nice-min-width",Math.max(this.optionListElement?.offsetWidth??0,this.presentationElement?.offsetWidth??0)+"px"),requestAnimationFrame((()=>{this.skipObservers=!1}))};this.childListObserver=new MutationObserver((t=>{this.skipObservers||(clearTimeout(o),o=setTimeout((()=>{i(),this.style.setProperty("--nice-min-width","0"),requestAnimationFrame(s)}),10))})),this.childListObserver.observe(this,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.optionListElement.addEventListener("click",(t=>{"OPTION"===t.target?.tagName&&this.currentOption!==t.target&&(this.currentOption=t.target,this.selectCurrrentOption(),this.focusElement?.focus(),this.internals.states.add("interacted"))})),this.addEventListener("keydown",(t=>{if("ArrowDown"===t.key||"ArrowUp"===t.key){let e;if(t.preventDefault(),this.updateAvailableOptions(),"ArrowDown"===t.key?e=this.availableOptions[this.availableOptions.indexOf(this.currentOption)+1]??this.availableOptions[0]:"ArrowUp"===t.key&&(e=this.availableOptions[this.availableOptions.indexOf(this.currentOption)-1]??this.availableOptions[this.availableOptions.length-1]),!e)return;this.currentOption=e,this.selectCurrrentOption(),this.internals.states.add("interacted"),this.internals.states.add("open")}})),document.addEventListener("click",this.openListener),t.replace("\n\t\t\t\t:host, *, *::before, *::after {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\t\t\t\t:host {\n\t\t\t\t\t--nice-padding-top: .375em;\n\t\t\t\t\t--nice-padding-bottom: .375em;\n\t\t\t\t\t--nice-padding-start: .625em;\n\t\t\t\t\t--nice-padding-end: .625em;\n\t\t\t\t\t--nice-option-padding-top: .25em;\n\t\t\t\t\t--nice-option-padding-bottom: .15em;\n\t\t\t\t\t--nice-option-padding-start: .25em;\n\t\t\t\t\t--nice-option-padding-end: .5em;\n\t\t\t\t\t--nice-optgroup-label-size: .85;\n\t\t\t\t\t--nice-min-width: 8em;\n\t\t\t\t\t--nice-max-height: 15lh;\n\t\t\t\t\t--nice-background-color: white;\n\t\t\t\t\t--nice-color: black;\n\t\t\t\t\t--nice-focus-background-color: #f0f0f0;\n\t\t\t\t\t--nice-selected-background-color: #444;\n\t\t\t\t\t--nice-selected-color: white;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tz-index: 1;\n\t\t\t\t\tpadding-top: var(--nice-padding-top);\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t\tmin-width: max(var(--nice-min-width), 8em);\n\t\t\t\t\tcolor: var(--nice-color);\n\t\t\t\t}\n\t\t\t\t@media (prefers-color-scheme: dark) {\n\t\t\t\t\t:host {\n\t\t\t\t\t\t--nice-background-color: black;\n\t\t\t\t\t\t--nice-color: white;\n\t\t\t\t\t\t--nice-focus-background-color: #4f4f4f;\n\t\t\t\t\t\t--nice-selected-background-color: #f0f0f0;\n\t\t\t\t\t\t--nice-selected-color: black;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t:host([disabled]) {\n\t\t\t\t\tcolor: gray;\n\t\t\t\t\tcursor: not-allowed;\n\t\t\t\t}\n\t\t\t\tnice-dropdown {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tz-index: -1;\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-rows: 0fr;\n\t\t\t\t\tpadding-top: calc(1lh + var(--nice-padding-top) + var(--nice-padding-bottom) /2);\n\t\t\t\t\tborder: 1px solid;\n\t\t\t\t\tborder-radius: .25em;\n\t\t\t\t\tbackground: var(--nice-background-color);\n\t\t\t\t\toverflow: clip;\n\t\t\t\t\ttransition: 200ms;\n\t\t\t\t}\n\t\t\t\tnice-dropdown-inner {\n\t\t\t\t\tgrid-row: 1 / span 2;\n\t\t\t\t}\n\t\t\t\t:host(:focus-within),\n\t\t\t\t:host(:state(open)) {\n\t\t\t\t\tnice-dropdown {\n\t\t\t\t\t\tgrid-template-rows: 1fr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnice-dropdown-padding {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tgap: .25em;\n\t\t\t\t\tpadding-bottom: var(--nice-padding-bottom);\n\t\t\t\t\tpadding-inline-start: var(--nice-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-padding-end);\n\t\t\t\t}\n\t\t\t\tnice-optionlist {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmax-height: var(--nice-max-height);\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\tscrollbar-width: thin;\n\t\t\t\t\tpadding-inline-end: .3em;\n\t\t\t\t}\n\t\t\t\toption {\n\t\t\t\t\tbox-sizing: content-box;\n\t\t\t\t\theight: 1lh;\n\t\t\t\t\tpadding-block: var(--nice-option-padding-top) var(--nice-option-padding-bottom);\n\t\t\t\t\tpadding-inline: var(--nice-option-padding-start) var(--nice-option-padding-end);\n\t\t\t\t\ttransition: 130ms;\n\n\t\t\t\t\t&[selected] {\n\t\t\t\t\t\tbackground: var(--nice-selected-background-color);\n\t\t\t\t\t\tcolor: var(--nice-selected-color);\n\t\t\t\t\t}\n\t\t\t\t\t&[disabled] {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t\topacity: .5;\n\t\t\t\t\t}\n\t\t\t\t\t&:not([disabled]) {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t\t&:not([disabled], [selected]):focus,\n\t\t\t\t\t&:not([disabled], [selected]):hover {\n\t\t\t\t\t\tbackground: var(--nice-focus-background-color);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnice-optgroup {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tpadding-inline-start: var(--nice-option-padding-start);\n\n\t\t\t\t\t&:not(:first-child) {\n\t\t\t\t\t\tpadding-top: calc(var(--nice-option-padding-top) * 2);\n\t\t\t\t\t\tpadding-bottom: var(--nice-option-padding-bottom);\n\t\t\t\t\t\tmargin-top: var(--nice-option-padding-top);\n\t\t\t\t\t\tborder-top: 1px dotted;\n\t\t\t\t\t}\n\t\t\t\t\t&:not(:last-child) {\n\t\t\t\t\t\tmargin-bottom: var(--nice-option-padding-bottom);\n\t\t\t\t\t\tborder-bottom: 1px dotted;\n\t\t\t\t\t}\n\t\t\t\t\t&[hidden] {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\toption {\n\t\t\t\t\t\tmargin-inline-start: var(--nice-option-padding-start);\n\n\t\t\t\t\t\t&:first-of-type {\n\t\t\t\t\t\t\tmargin-top: var(--nice-option-padding-top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnice-optgroup-label {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tfont-size: 90%;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\tnice-search-wrapper {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: calc(1lh + .5em);\n\t\t\t\t\tpadding-inline-start: var(--nice-option-padding-start);\n\t\t\t\t\tpadding-inline-end: var(--nice-option-padding-end);\n\t\t\t\t\tborder: 1px dotted;\n\t\t\t\t\tborder-radius: .25em;\n\n\t\t\t\t\t&:focus-within nice-dropdown {\n\t\t\t\t\t\toutline: 1px solid;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnice-search {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tpadding-block: .25em;\n\t\t\t\t\tcursor: text;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow: clip;\n\n\t\t\t\t\t&:focus {\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t}\n\t\t\t\t\t&:empty:before {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\topacity: .6;\n\t\t\t\t\t}\n\t\t\t\t\tdiv, br {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\tnice-dropdown:not([inert]) & {\n\t\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnice-presentation {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t")}attributeChangedCallback(t,e,n){switch(t){case"data-search":this.toggleSearch();break;case"data-search-placeholder":this.updateSearchPlaceHolderCSS(n);break;case"placeholder":this.placeholder=n,this.presentationElement.textContent=this.currentOption?.value||this.placeholder;break;case"disabled":this.toggleDisabled()}}get interacted(){return this.internals.states.has("interacted")}get open(){return this.internals.states.has("open")}set open(t){t?this.internals.states.add("open"):this.internals.states.delete("open")}checkValidity(){return this.internals.checkValidity()}reportValidity(){return this.internals.reportValidity()}get validity(){return this.internals.validity}get value(){return this.currentOption?.value||null}set value(t){const e=this.availableOptions.find((e=>e.value===t));if(!e)throw new Error(`'${t}' is not a valid option.`);this.currentOption=e,this.selectCurrrentOption()}discconnectCallback(){document.removeEventListener("click",this.openListener),console.log("disconnect")}});